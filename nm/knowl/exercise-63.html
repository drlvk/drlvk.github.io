<!DOCTYPE html>
<html lang="en-US">
<!--**************************************-->
<!--*    Generated from PreTeXt source   *-->
<!--*    on 2021-04-21T23:15:35-04:00    *-->
<!--*                                    *-->
<!--*      https://pretextbook.org       *-->
<!--*                                    *-->
<!--**************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body>
<article class="exercise exercise-like"><h6 class="heading">
<span class="type">Exercise</span><span class="space"> </span><span class="codenumber">1<span class="period">.</span></span>
</h6>
<p>Instead of deciding in advance how many coefficients to discard, it is usually preferable to maintain some degree of quality of the image. This is often measured in terms of “energy”, defined as the sum of squares of absolute values of Fourier coefficients (except the constant one). That, is to have 95% quality, we want to keep enough Fourier coefficients so that the sum of their squares is at least 95% of the total sum of squares. Equivalently, we discard the coefficients that contribute 5% of the energy.</p>
<p>The goal of this exercise is to modify <a class="xref" data-knowl="./knowl/example-compress-image.html" title="Example 26.2.2: Compress an image using Discrete Fourier Transform">Example 26.2.2</a> so that the input value is quality <code class="code-inline tex2jax_ignore">q</code> such as 90 or 95, and the image in <a class="xref" data-knowl="./knowl/winter-png.html" title="Figure 26.2.1">Figure 26.2.1</a> is compressed based on the energy consideration.</p>
<p>Suggestions: sort the Fourier coefficients from largest to smallest using</p>
<pre class="code-block tex2jax_ignore">
sorted = sort(abs(fc(:)), 'descend');  
</pre>
<p data-braille="continuation">and remove the largest of them (the constant term):</p>
<pre class="code-block tex2jax_ignore">
sorted = sorted(2:end);  
</pre>
<p data-braille="continuation">The total energy is</p>
<pre class="code-block tex2jax_ignore">
total = sum(sorted.^2); 
</pre>
<p data-braille="continuation">The key step is writing a loop that sums the squares of the elements of <code class="code-inline tex2jax_ignore">sorted</code> array until the sum reaches the desired proportion of the total energy. When the loop exits, you will know what threshold value <code class="code-inline tex2jax_ignore">thr</code> should be used for truncating Fourier coefficients.</p>
<p>Compare the quality of compressed image with <code class="code-inline tex2jax_ignore">q = 90</code>, <code class="code-inline tex2jax_ignore">q = 80</code>, and <code class="code-inline tex2jax_ignore">q = 70</code>. In addition to showing the compressed image, the script should display the percentage of Fourier coefficients that were kept as non-zero values: for example, <code class="code-inline tex2jax_ignore">100*numel(nonzeros(fc))/numel(fc)</code>.</p></article><span class="incontext"><a href="exercises-dft-applications.html#exercise-63">in-context</a></span>
</body>
</html>
